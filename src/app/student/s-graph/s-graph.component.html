<div id="map-body">
  <div id="toolbar">
    <!--<nz-tabset-->
      <!--id="mindmap-tabset"-->
      <!--[nzTabPosition]="'top'"-->
      <!--[(nzSelectedIndex)]="selectedIndex"-->
      <!--[nzType]="'card'"-->
      <!--(click)="switchMode()">-->
      <!--&lt;!&ndash;关系显示模式&ndash;&gt;-->
      <!--<nz-tab [nzTitle]="'关系显示模式'">-->
      <!--</nz-tab>-->

      <!--&lt;!&ndash;学情分析模式&ndash;&gt;-->
      <!--<nz-tab [nzTitle]="'学情分析模式' " [nzDisabled]="isLoadingTest">-->
      <!--</nz-tab>-->

      <!--&lt;!&ndash;薄弱环节分析模式&ndash;&gt;-->
      <!--<nz-tab [nzTitle]="'薄弱环节分析模式' " [nzDisabled]="isLoadingTest">-->
      <!--</nz-tab>-->
    <!--</nz-tabset>-->
    <div>
      <nz-row>
        <nz-col [nzSpan]="8">
          <nz-radio-group [(ngModel)]="selectedIndex" nzButtonStyle="solid" (ngModelChange)="switchMode()">
            <label nz-radio-button [nzValue]=0 [nzAutoFocus]="true">关系显示模式</label>
            <!--<label nz-radio-button [nzValue]=1 [nzDisabled]="isLoadingTest" (click)="switchMode()">学情分析模式</label>-->
            <label nz-radio-button [nzValue]=2 [nzDisabled]="isLoadingTest">薄弱环节分析模式</label>
            <label nz-radio-button [nzValue]=3 [nzDisabled]="isLoadingTest">推荐度模式</label>
          </nz-radio-group>
        </nz-col>
        <nz-col [nzSpan]="4">
          <button nz-button nzType="default" (click)="openTestModal()" [nzLoading]="isLoadingTest" #testButton>
            <i nz-icon nzType="file-exclamation"></i>
            测试当前学习水平
          </button>
        </nz-col>
        <nz-col [nzSpan]="4">
          <button nz-button nzType="default" (click)="openSituationList()" [nzLoading]="isLoadingTest" #testButton>
            <i nz-icon nzType="ordered-list" nzTheme="outline"></i>
            查看薄弱环节排行
          </button>
        </nz-col>
        <nz-col [nzSpan]="4">
          <button nz-button nzType="default" (click)="openRecommendList()" [nzLoading]="isLoadingTest" #testButton>
            <i nz-icon nzType="ordered-list" nzTheme="outline"></i>
            查看推荐度排行
          </button>
        </nz-col>
        <nz-col style="margin : 0 auto" [nzSpan]="4">
          <i nz-popover nzPopoverTitle="所以节点的颜色是什么意思呢？" [nzPopoverContent]="popoverContentTemplate" nz-icon nzType="question-circle" nzTheme="outline" style="float: right"></i>
        </nz-col>
      </nz-row>
    </div>
  </div>
  <div id="cy"></div>
</div>

<ng-template #testTitle>
  <span>测试</span>
</ng-template>

<ng-template #testMultipleContent>
  <form>
    <div class="title item"><b>{{stuMultiples[0].title}}</b></div>
    <div class="options item">
      <div>
        <span>A. </span><span class="optionA"> {{stuMultiples[0].optionA}}</span>
      </div>
      <div>
        <span>B. </span><span class="optionB"> {{stuMultiples[0].optionB}}</span>
      </div>
      <div>
        <span>C. </span><span class="optionC"> {{stuMultiples[0].optionC}}</span>
      </div>
      <div>
        <span>D. </span><span class="optionD"> {{stuMultiples[0].optionD}}</span>
      </div>
    </div>

    <nz-radio-group [(ngModel)]="stuMultiples[0].answer" name="stuAnswer">
      <label nz-radio nzValue="A">A</label>
      <label nz-radio nzValue="B">B</label>
      <label nz-radio nzValue="C">C</label>
      <label nz-radio nzValue="D">D</label>
    </nz-radio-group>
  </form>
</ng-template>

<ng-template #testShortContent>
  <form>
    <div class="title item"><b>{{stuShorts[0].title}}</b></div>
    <textarea rows="4" style="max-width: 500px" nz-input name="stuAnswer" [(ngModel)]="stuShorts[0].answer"></textarea>
  </form>
</ng-template>

<ng-template #testJudgeContent>
  <form>
    <div class="title item"><b>{{stuJudges[0].title}}</b></div>
    <nz-radio-group [(ngModel)]="stuJudges[0].answer" name="stuAnswer">
      <label nz-radio nzValue="T">正确</label>
      <label nz-radio nzValue="F">错误</label>
    </nz-radio-group>
  </form>
</ng-template>

<ng-template #testFooter>
  <button nz-button nzType="default" (click)="revaluateGraph()" [nzLoading]="isLoadingRecommendation"><i nz-icon nzType="vertical-align-top" nzTheme="outline"></i>提交已答题目</button>
  <button nz-button nzType="primary" (click)="nextTestAnswer()" [nzLoading]="isLoadingNext">下一题<i nz-icon nzType="caret-right" nzTheme="outline"></i></button>
</ng-template>

<ng-template #popoverContentTemplate>
  <nz-progress [nzStrokeWidth]="10" [nzPercent]="100" [nzShowInfo]="false" [nzStrokeColor]="{ '0%': '#e1eec3', '100%': '#f05053' }" nzStatus="active"></nz-progress>
  <span>颜色越深，代表掌握程度越好</span>
</ng-template>

<ng-template #situationList>
  <ul style="list-style-type: None">
    <li *ngFor="let v of recommendationList['sortedVertices'].slice(0, 8) let i=index">
      <nz-statistic [nzValue]="this.cy.getElementById(v['vertex']['id']).data('name')"
                    [nzTitle]="'第'+(rankList[i])+'名'">

      </nz-statistic>
    </li>
  </ul>
</ng-template>

<ng-template #recommList>
  <ul style="list-style-type: None">
    <li *ngFor="let v of recommendResourceList['sortedVertices'].slice(0, 8) let i=index">
      <nz-statistic [nzValue]="this.cy.getElementById(v['vertex']['id']).data('name')"
                    [nzTitle]="'第'+(rankList[i])+'名'" (click)="clickToViewResource(v['vertex']['id'])">

      </nz-statistic>
    </li>
  </ul>
</ng-template>

<ng-template #resourceListView>
  <ul style="list-style-type: None">
      <nz-list [nzDataSource]="resourceList"
               [nzRenderItem]="link_item">
        <ng-template #link_item let-link_item>
          <nz-list-item [nzContent]="link_item['link_name']" [nzActions]="[jumpAction]">
            <ng-template #jumpAction>
              <a target="_blank" href="{{ link_item['link_address'] }}">访问</a>
            </ng-template>
          </nz-list-item>
        </ng-template>
      </nz-list>
  </ul>
</ng-template>
